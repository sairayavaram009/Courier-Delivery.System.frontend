import{r as b,o as h,m as p,a as r,c as i,w as s,b as t,d as n,V as g,e as u,k as V,n as k,t as v,h as m,F as S,p as C,l as y}from"./index-e74253a8.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{V as B,a as x,b as F}from"./VTextField-aad6fd0f.js";import{V as N,a as U,b as E}from"./VTable-81f3a4ed.js";const I={name:"SubscribersPage",setup(){const c=b([]),a=b({value:!1,color:"",text:""});h(async()=>{try{const l=await p.get("http://localhost:3201/travelapi/subscribe");c.value=l.data}catch(l){console.log(l),a.value.value=!0,a.value.color="error",a.value.text="Failed to fetch subscribers."}});function f(){a.value.value=!1}function o(l){l.editing=!0}function _(l){p.put(`http://localhost:3201/travelapi/subscribe/${l.id}`,{name:l.name,contact:l.contact}).then(e=>{console.log("Subscriber saved:",e.data),l.editing=!1,a.value.value=!0,a.value.color="success",a.value.text="Subscriber saved successfully."}).catch(e=>{console.error("Error saving subscriber:",e),a.value.value=!0,a.value.color="error",a.value.text="Failed to save subscriber."})}return{subscribers:c,snackbar:a,closeSnackBar:f,editSubscriber:o,saveSubscriber:_}}},T=c=>(C("data-v-bac19440"),c=c(),y(),c),M={id:"body"},A=T(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Name"),t("th",{class:"text-left"},"Email"),t("th",{class:"text-left"},"Contact"),t("th",{class:"text-left"},"Message"),t("th",{class:"text-left"},"Actions")])],-1));function D(c,a,f,o,_,l){return r(),i(B,null,{default:s(()=>[t("div",M,[n(U,{align:"center",class:"mb-4"},{default:s(()=>[n(N,{cols:"10"},{default:s(()=>[n(g,{class:"pl-0 text-h4 font-weight-bold"},{default:s(()=>[u(" Subscribers ")]),_:1})]),_:1})]),_:1}),n(E,{class:"rounded-lg elevation-5"},{default:s(()=>[A,t("tbody",null,[(r(!0),V(S,null,k(o.subscribers,e=>(r(),V("tr",{key:e.id},[t("td",null,[n(x,{modelValue:e.name,"onUpdate:modelValue":d=>e.name=d,disabled:!e.editing,label:"Name",maxlength:"10"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),t("td",null,v(e.email),1),t("td",null,[n(x,{modelValue:e.contact,"onUpdate:modelValue":d=>e.contact=d,disabled:!e.editing,label:"Contact",maxlength:"10",pattern:"[0-9]{10}"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),t("td",null,v(e.message),1),t("td",null,[e.editing?(r(),i(m,{key:1,onClick:d=>o.saveSubscriber(e)},{default:s(()=>[u("Save")]),_:2},1032,["onClick"])):(r(),i(m,{key:0,onClick:d=>o.editSubscriber(e)},{default:s(()=>[u("Edit")]),_:2},1032,["onClick"]))])]))),128))])]),_:1}),n(F,{modelValue:o.snackbar.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.snackbar.value=e),rounded:"pill"},{actions:s(()=>[n(m,{color:o.snackbar.color,variant:"text",onClick:a[0]||(a[0]=e=>o.closeSnackBar())},{default:s(()=>[u(" Close ")]),_:1},8,["color"])]),default:s(()=>[u(v(o.snackbar.text)+" ",1)]),_:1},8,["modelValue"])])]),_:1})}const q=w(I,[["render",D],["__scopeId","data-v-bac19440"]]);export{q as default};
