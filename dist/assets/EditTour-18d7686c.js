import{A as f,B as ge,C as Ve,D as ie,E as Ie,G as de,H as ye,I as be,J as we,r as p,d as e,K as se,L as Se,M as Ce,N as xe,o as Re,a as C,c as le,w as t,V as $,e as r,j as E,f as T,g as te,h as x,i as ae,k as M,n as ue,O as j,b as R,t as c,F as ne}from"./index-e74253a8.js";import{m as ke,V as oe,I as q,a as he,b as _e,c as Ae,d as $e}from"./VSelect-e44db73d.js";import{m as Ue,u as Ne,c as re,V as Pe,a as W,b as Be}from"./VTextField-aad6fd0f.js";import{V as w,a as S,b as Ee}from"./VTable-81f3a4ed.js";import{V as ce}from"./VTextarea-d2bdee76.js";import{V as ve}from"./VDialog-a1f3c067.js";const G={getRecipeIngredients(){return f.get("recipeIngredients")},getRecipeIngredientsForRecipe(u){return f.get("recipes/"+u+"/recipeIngredients")},getRecipeIngredientsForRecipeStep(u,I){return f.get("recipes/"+u+"/recipeSteps/"+I+"/recipeIngredientsWithIngredients")},getRecipeIngredient(u){return f.get("recipes/"+u.recipeId+"/recipeIngredients/"+u.id)},addRecipeIngredient(u){return f.post("recipes/"+u.recipeId+"/recipeIngredients",u)},updateRecipeIngredient(u){return f.put("recipes/"+u.recipeId+"/recipeIngredients/"+u.id,u)},deleteRecipeIngredient(u){return f.delete("recipes/"+u.recipeId+"/recipeIngredients/"+u.id)}},pe={getRecipes(){return f.get("recipes")},getRecipesByUserId(u){return f.get("recipes/user/"+u)},getRecipe(u){return f.get("recipes/"+u)},addRecipe(u){return f.post("recipes",u)},updateRecipe(u,I){return f.put("recipes/"+u,I)},deleteRecipe(u){return f.delete("recipes/"+u)}};const Te=ge({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ue(),...ke()},"v-switch"),qe=Ve()({name:"VSwitch",inheritAttrs:!1,props:Te(),emits:{"update:focused":u=>!0,"update:modelValue":()=>!0,"update:indeterminate":u=>!0},setup(u,I){let{attrs:s,slots:k}=I;const v=ie(u,"indeterminate"),U=ie(u,"modelValue"),{loaderClasses:F}=Ie(u),{isFocused:y,focus:m,blur:g}=Ne(u),V=de(()=>typeof u.loading=="string"&&u.loading!==""?u.loading:u.color),a=ye(),d=de(()=>u.id||`switch-${a}`);function o(){v.value&&(v.value=!1)}return be(()=>{const[z,H]=we(s),[J,N]=re.filterProps(u),[K,O]=oe.filterProps(u),D=p();function L(b){var h,_;b.stopPropagation(),b.preventDefault(),(_=(h=D.value)==null?void 0:h.input)==null||_.click()}return e(re,se({class:["v-switch",{"v-switch--inset":u.inset},{"v-switch--indeterminate":v.value},F.value,u.class],style:u.style},z,J,{id:d.value,focused:y.value}),{...k,default:b=>{let{id:h,messagesId:_,isDisabled:Y,isReadonly:Q,isValid:X}=b;return e(oe,se({ref:D},K,{modelValue:U.value,"onUpdate:modelValue":[P=>U.value=P,o],id:h.value,"aria-describedby":_.value,type:"checkbox","aria-checked":v.value?"mixed":void 0,disabled:Y.value,readonly:Q.value,onFocus:m,onBlur:g},H),{...k,default:()=>e("div",{class:"v-switch__track",onClick:L},null),input:P=>{let{textColorClasses:Z,textColorStyles:ee}=P;return e("div",{class:["v-switch__thumb",Z.value],style:ee.value},[u.loading&&e(Se,{name:"v-switch",active:!0,color:X.value===!1?void 0:V.value},{default:B=>k.loader?k.loader(B):e(Ce,{active:B.isActive,color:B.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),We={__name:"EditTour",setup(u){const I=xe(),s=p({}),k=p([]),v=p({}),U=p([]),F=p([]),y=p(!1),m=p(!1),g=p(!1),V=p(!1),a=p({value:!1,color:"",text:""}),d=p({id:void 0,stepNumber:void 0,instruction:void 0,recipeId:void 0,recipeIngredient:[]}),o=p({id:void 0,quantity:void 0,recipeId:void 0,recipeStepId:void 0,ingredientId:void 0});Re(async()=>{await z(),await N(),await J(),await b()});async function z(){await pe.getRecipe(I.params.id).then(l=>{s.value=l.data[0]}).catch(l=>{console.log(l)})}async function H(){await pe.updateRecipe(s.value.id,s.value).then(()=>{a.value.value=!0,a.value.color="green",a.value.text=`${s.value.name} updated successfully!`}).catch(l=>{console.log(l),a.value.value=!0,a.value.color="error",a.value.text=l.response.data.message}),await z()}async function J(){await q.getIngredients().then(l=>{k.value=l.data}).catch(l=>{console.log(l),a.value.value=!0,a.value.color="error",a.value.text=l.response.data.message})}async function N(){await q.getRecipeIngredientsForRecipe(I.params.id).then(l=>{U.value=l.data}).catch(l=>{console.log(l)})}async function K(){y.value=!1,o.value.recipeId=s.value.id,o.value.ingredientId=v.value.id,delete o.value.id,await q.addRecipeIngredient(o.value).then(()=>{a.value.value=!0,a.value.color="green",a.value.text="Ingredient added successfully!"}).catch(l=>{console.log(l),a.value.value=!0,a.value.color="error",a.value.text=l.response.data.message}),await N()}async function O(){m.value=!1,o.value.recipeId=s.value.id,o.value.ingredientId=v.value.id,console.log(o),await q.updateRecipeIngredient(o.value).then(()=>{a.value.value=!0,a.value.color="green",a.value.text=`${v.value.name} updated successfully!`}).catch(l=>{console.log(l),a.value.value=!0,a.value.color="error",a.value.text=l.response.data.message}),await N()}async function D(l){await q.deleteRecipeIngredient(l).then(()=>{a.value.value=!0,a.value.color="green",a.value.text=`${l.ingredient.name} deleted successfully!`}).catch(i=>{console.log(i),a.value.value=!0,a.value.color="error",a.value.text=i.response.data.message}),await N()}async function L(){if(d.value.recipeIngredient.length>0){console.log(d.value.recipeIngredient);for(let l=0;l<d.value.recipeIngredient.length;l++)o.value.id=d.value.recipeIngredient[l].id,o.value.quantity=d.value.recipeIngredient[l].quantity,o.value.recipeStepId=d.value.id,v.value.id=d.value.recipeIngredient[l].ingredientId,await O()}}async function b(){await G.getRecipeStepsForRecipeWithIngredients(I.params.id).then(l=>{F.value=l.data}).catch(l=>{console.log(l)})}async function h(){g.value=!1,d.value.recipeId=s.value.id,delete d.value.id,await G.addRecipeStep(d.value).then(l=>{d.value.id=l.data.id,a.value.value=!0,a.value.color="green",a.value.text="Tour added successfully!"}).catch(l=>{console.log(l),a.value.value=!0,a.value.value.color="error",a.value.text=l.response.data.message}),await L(),await b()}async function _(){V.value=!1,await G.updateRecipeStep(d.value).then(()=>{a.value.value=!0,a.value.color="green",a.value.text="Step updated successfully!"}).catch(l=>{console.log(l),a.value.value=!0,a.value.color="error",a.value.text=l.response.data.message}),await L(),await b()}async function Y(l){await G.deleteRecipeStep(l).then(()=>{a.value.value=!0,a.value.color="green",a.value.text="Attraction deleted successfully!"}).catch(i=>{console.log(i),a.value.value=!0,a.value.color="error",a.value.text=i.response.data.message}),await b()}function Q(l){o.value.id=l.id,o.value.quantity=l.quantity,o.value.recipeStepId=l.recipeStepId,o.value.ingredientId=l.ingredientId,v.value=l.ingredient,m.value=!0}function X(){d.value.id=void 0,d.value.stepNumber=void 0,d.value.instruction=void 0,d.value.recipeIngredient=[],g.value=!0}function P(l){d.value.id=l.id,d.value.stepNumber=l.stepNumber,d.value.instruction=l.instruction,d.value.recipeIngredient=l.recipeIngredient,V.value=!0}function Z(){y.value=!1}function ee(){m.value=!1}function B(){g.value=!1}function fe(){V.value=!1}function me(){a.value.value=!1}return(l,i)=>(C(),le(Pe,null,{default:t(()=>[e(S,{align:"center"},{default:t(()=>[e(w,{cols:"10"},{default:t(()=>[e($,{class:"pl-0 text-h4 font-weight-bold"},{default:t(()=>[r("Edit Tour ")]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(w,null,{default:t(()=>[e(E,{class:"rounded-lg elevation-5"},{default:t(()=>[e(T,null,{default:t(()=>[e(S,null,{default:t(()=>[e(w,null,{default:t(()=>[e(W,{modelValue:s.value.name,"onUpdate:modelValue":i[0]||(i[0]=n=>s.value.name=n),label:"Name",required:""},null,8,["modelValue"]),e(W,{modelValue:s.value.servings,"onUpdate:modelValue":i[1]||(i[1]=n=>s.value.servings=n),modelModifiers:{number:!0},label:"Enter The price",type:"number"},null,8,["modelValue"]),e(W,{modelValue:s.value.time,"onUpdate:modelValue":i[2]||(i[2]=n=>s.value.time=n),modelModifiers:{number:!0},label:"Number of days (in days)",type:"number"},null,8,["modelValue"]),e(qe,{modelValue:s.value.isPublished,"onUpdate:modelValue":i[3]||(i[3]=n=>s.value.isPublished=n),"hide-details":"",inset:"",label:`Publish? ${s.value.isPublished?"Yes":"No"}`},null,8,["modelValue","label"])]),_:1}),e(w,null,{default:t(()=>[e(ce,{modelValue:s.value.description,"onUpdate:modelValue":i[4]||(i[4]=n=>s.value.description=n),rows:"10",label:"Description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(te,{class:"pt-0"},{default:t(()=>[e(x,{variant:"flat",color:"primary",onClick:i[5]||(i[5]=n=>H())},{default:t(()=>[r("Update Tour")]),_:1}),e(ae)]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(w,null,{default:t(()=>[e(E,{class:"rounded-lg elevation-5"},{default:t(()=>[e($),e(T,null,{default:t(()=>[e(he,null,{default:t(()=>[(C(!0),M(ne,null,ue(U.value,n=>(C(),le(_e,{key:n.id},{append:t(()=>[e(S,null,{default:t(()=>[e(j,{class:"mx-2",size:"x-small",icon:"mdi-pencil",onClick:A=>Q(n)},null,8,["onClick"]),e(j,{class:"mx-2",size:"x-small",icon:"mdi-trash-can",onClick:A=>D(n)},null,8,["onClick"])]),_:2},1024)]),default:t(()=>[R("b",null,c(n.quantity)+" "+c(`${n.ingredient.unit}${n.quantity>1?"s":""}`),1),r(" of "+c(n.ingredient.name)+" ($"+c(n.ingredient.pricePerUnit)+"/"+c(n.ingredient.unit)+") ",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(w,null,{default:t(()=>[e(E,{class:"rounded-lg elevation-5"},{default:t(()=>[e($,null,{default:t(()=>[e(S,{align:"center"},{default:t(()=>[e(w,{cols:"10"},{default:t(()=>[e($,{class:"headline"},{default:t(()=>[r("Tour Info ")]),_:1})]),_:1}),e(w,{class:"d-flex justify-end",cols:"2"},{default:t(()=>[e(x,{color:"accent",onClick:i[6]||(i[6]=n=>X())},{default:t(()=>[r("Add")]),_:1})]),_:1})]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(Ee,null,{default:t(()=>[R("tbody",null,[(C(!0),M(ne,null,ue(F.value,n=>(C(),M("tr",{key:n.id},[R("td",null,c(n.stepNumber),1),R("td",null,c(n.instruction),1),R("td",null,[(C(!0),M(ne,null,ue(n.recipeIngredient,A=>(C(),le(Ae,{size:"small",key:A.id,pill:""},{default:t(()=>[r(c(A.ingredient.name),1)]),_:2},1024))),128))]),R("td",null,[e(j,{size:"x-small",icon:"mdi-pencil",onClick:A=>P(n)},null,8,["onClick"])]),R("td",null,[e(j,{size:"x-small",icon:"mdi-trash-can",onClick:A=>Y(n)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ve,{persistent:"","model-value":y.value||m.value,width:"800"},{default:t(()=>[e(E,{class:"rounded-lg elevation-5"},{default:t(()=>[e($,{class:"headline mb-2"},{default:t(()=>[r(c(y.value?"Add Attractions":m.value?"Edit Attractions":""),1)]),_:1}),e(T,null,{default:t(()=>[e(S,null,{default:t(()=>[e(w,null,{default:t(()=>[e($e,{modelValue:o.value.name,"onUpdate:modelValue":i[7]||(i[7]=n=>o.value.name=n),items:l.Attractions,"item-title":"name","item-value":"unit",label:"Attractions","return-object":"",required:""},{prepend:t(()=>[r(c(`${v.value&&v.value.unit?v.value.unit:""}${o.value.quantity>1?"s":""}`)+" of ",1)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(te,null,{default:t(()=>[e(ae),e(x,{variant:"flat",color:"secondary",onClick:i[8]||(i[8]=n=>y.value?Z():m.value?ee():!1)},{default:t(()=>[r("Close")]),_:1}),e(x,{variant:"flat",color:"primary",onClick:i[9]||(i[9]=n=>y.value?K():m.value?O():!1)},{default:t(()=>[r(c(y.value?"Add Ingredient":m.value?"Update Ingredient":""),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(ve,{persistent:"","model-value":g.value||V.value,width:"800"},{default:t(()=>[e(E,{class:"rounded-lg elevation-5"},{default:t(()=>[e($,{class:"headline mb-2"},{default:t(()=>[r(c(g.value?"Add Tour info":V.value?"Edit Step":""),1)]),_:1}),e(T,null,{default:t(()=>[e(W,{modelValue:d.value.stepNumber,"onUpdate:modelValue":i[10]||(i[10]=n=>d.value.stepNumber=n),label:"Number of day's",type:"number of day's",required:""},null,8,["modelValue"]),e(ce,{modelValue:d.value.instruction,"onUpdate:modelValue":i[11]||(i[11]=n=>d.value.instruction=n),label:"Instruction",required:""},null,8,["modelValue"])]),_:1}),e(te,null,{default:t(()=>[e(ae),e(x,{variant:"flat",color:"secondary",onClick:i[12]||(i[12]=n=>g.value?B():V.value?fe():!1)},{default:t(()=>[r("Close")]),_:1}),e(x,{variant:"flat",color:"primary",onClick:i[13]||(i[13]=n=>g.value?h():V.value?_():!1)},{default:t(()=>[r(c(g.value?"Add tour":V.value?"Update tour":""),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(Be,{modelValue:a.value.value,"onUpdate:modelValue":i[15]||(i[15]=n=>a.value.value=n),rounded:"pill"},{actions:t(()=>[e(x,{color:a.value.color,variant:"text",onClick:i[14]||(i[14]=n=>me())},{default:t(()=>[r(" Close ")]),_:1},8,["color"])]),default:t(()=>[r(c(a.value.text)+" ",1)]),_:1},8,["modelValue"])]),_:1}))}};export{We as default};
